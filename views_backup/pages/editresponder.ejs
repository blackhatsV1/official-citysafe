<!DOCTYPE html>
<html lang="en">

<head>
  <%- include('../partials/head'); %>
</head>

<body>
  <%- include('../partials/page-start'); %>
  <div class="container-fluid position-relative d-flex p-0">
    <!-- Spinner Start -->
    <%- include('../partials/spinner'); %>
    <!-- Spinner End -->


    <!-- Sidebar Start -->
    <%- include('../partials/admin-sidebar'); %>
    <!-- Sidebar End -->


    <!-- Content Start -->
    <div class="content">
      <!-- Navbar Start -->
      <%- include('../partials/admin-navbar'); %>
      <!-- Navbar End -->

      <!-- Widgets Start -->
      <div class="container-fluid pt-4 px-4">
        <div class="container bg-secondary rounded p-3 mb-4">
          <div class="d-flex align-items-center justify-content-between mb-4">
            <h4 class="mb-0">Edit Responder</h4>
          </div>

          <hr>

          <div class="container bg-secondary w-75 mt-3 p-3">
            <form action="/update-responder/<%= responder.id %>" method="POST">
              <div class="row mb-3">
                <label for="firstname" class="col-sm-3 col-form-label">Firstname</label>
                <div class="col-sm-9">
                  <input type="text" class="form-control" name="firstname" value="<%= responder.firstname %>" required id="firstname">
                </div>
              </div>

              <div class="row mb-3">
                <label for="lastname" class="col-sm-3 col-form-label">Lastname</label>
                <div class="col-sm-9">
                  <input type="text" class="form-control" id="lastname" name="lastname" value="<%= responder.lastname %>" required>
                </div>
              </div>

              <div class="row mb-3">
                <label for="email" class="col-sm-3 col-form-label">Email</label>
                <div class="col-sm-9">
                  <input type="email" class="form-control" id="email" name="email" value="<%= responder.email %>" required>
                </div>
              </div>

              <div class="row mb-3">
                <label for="contact_number" class="col-sm-3 col-form-label">Contact Number</label>
                <div class="col-sm-9">
                  <input type="text" class="form-control" id="contact_number" name="contact_number" value="<%= responder.contact_number %>" required>
                </div>
              </div>

              <div class="row mb-3">
                <label for="password" class="col-sm-3 col-form-label">Password</label>
                <div class="col-sm-9">
                  <input type="password" class="form-control" id="password" name="password" placeholder="Leave empty to keep existing password" autocomplete="new-password">
                  <button class="btn btn-outline-secondary mt-2" type="button" id="togglePassword">
                    <i class="bi bi-eye-slash text-primary"> Show Password</i>
                  </button>
                </div>
              </div>

              <div class="row mb-3">
                <label for="station_id" class="col-sm-3 col-form-label">Station</label>
                <div class="col-sm-9">
                  <select class="form-select" id="station_id" name="station_id" required>
                    <% stations.forEach(station => { %>
                    <option value="<%= station.id %>" <%= responder.station_id == station.id ? 'selected' : '' %>>
                      <%= station.name %> (<%= station.type %>)
                    </option>
                    <% }) %>
                  </select>
                </div>
              </div>

              <div class="d-flex align-items-center justify-content-between mb-0 mt-3">
                <button type="submit" class="btn btn-success">Update</button>
                <button type="button" class="btn btn-outline-danger" onclick="window.location.href='/userslist'">Cancel</button>
              </div>
            </form>
          </div>
        </div>
      </div>
      <!-- Widgets End -->


      <!-- Footer Start -->
      <%- include('../partials/page-end'); %>
      <%- include('../partials/footer'); %>
      <!-- Footer End -->
    </div>
    <!-- Content End -->


    <!-- Back to Top -->
    <a href="#" class="btn btn-lg btn-primary btn-lg-square back-to-top"><i class="bi bi-arrow-up"></i></a>
  </div>

  <script src="/js/script.js"></script>
  <script src="/js/script.js"></script>
  <script>
    const togglePassword = document.querySelector("#togglePassword");
    const passwordInput = document.querySelector("#password");
    const icon = togglePassword.querySelector("i");
  
    togglePassword.addEventListener("click", function () {
      const isPassword = passwordInput.getAttribute("type") === "password";
      passwordInput.setAttribute("type", isPassword ? "text" : "password");
      icon.classList.toggle("bi-eye");
      icon.classList.toggle("bi-eye-slash");
    });
  </script>
  <script src="/js/main.js"></script>
</body>

</html>
